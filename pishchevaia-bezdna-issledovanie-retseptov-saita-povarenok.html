<!DOCTYPE html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>    Пищевая бездна. Исследование рецептов сайта Поваренок.
</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
            <link href="https://fonts.googleapis.com/css?family=PT+Serif:400,400i,700,700i&amp;display=swap" rel="stylesheet">
        <link rel="stylesheet" href="/theme/css/main.css">
        <link rel="stylesheet" href="/theme/css/stars.css">
        <link rel="stylesheet" href="/theme/css/gray.css">

    <link rel="stylesheet" href="/theme/css/blog.css">
    <link rel="stylesheet" href="/theme/css/github.css">
        <!-- <script src="/theme/js/vendor/modernizr-2.6.2.min.js"></script> -->
        <link rel="shortcut icon" href="/images/favicon.png" />

    </head>
    <body class="">
        <div id="page" class="site palette-yellow">
      
      <header id="masthead" class="site-header bg--loaded">

        <div id="header-bg" class="site-header-bg" style="background-image:url('/images/DATAscience.png')">
          </div>
        <div class="site-header-scroll">
          <div class="site-header-inside">
            <div class="site-header-vertical">
              <div class="site-branding">
                <p class="site-logo">

                </p>
                <p class="site-description">Stmirage projects page</p>
              </div>
              <nav id="main-navigation" class="site-navigation" aria-label="Main Navigation">

                <div class="site-nav-wrap">
                  <div class="site-nav-inside">
                    <ul class="menu">
                      <li class="menu-item current-menu-item">
                        <a href="/">Главная</a>
                      </li>
                      <li class="menu-item">
                        <a href="/pages/kontakty">Контакты</a>
                      </li>
                      <li class="menu-item">
                        <a href="/pages/vse-proekty">Все проекты</a>
                      </li>
                    </ul>

                  </div>
                </div>
              </nav>

              <button id="menu-toggle" class="menu-toggle">
                <span class="screen-reader-text">Menu</span>
                <span class="icon-menu" aria-hidden="true"></span>
              </button>
            </div>
          </div>
        </div>
      </header>


<!--

        <footer id="colophon" class="site-footer inner">
          <div class="site-footer-inside">
            <span class="copyright">Опубликовано с удовольствием 2019-2020</span>
          </div>
          <a id="to-top" class="to-top" href="https://themes.stackbit.com/demos/fjord/#page">
            To top
            <span class="icon-arrow-up" aria-hidden="true"></span>
          </a>
        </footer>  
-->





        <div id="content" class="site-content">
        <main id="main" class="site-main inner">

    <div id="post-container">
                <article class="post-entry">
                    <header class="entry-header">
                        <time>
                            23.11.2020
                        </time>
                        <a href="/pishchevaia-bezdna-issledovanie-retseptov-saita-povarenok.html" rel="bookmark"><h1>Пищевая бездна. Исследование рецептов сайта Поваренок.</h1></a>
                    </header>

                    <section class="post-content">
                        <p>Первоначальная статья о моём небольшом проекте по анализу данных. Но вероятно, это растянется на несколько статей. </p>
<p>Каждый год я мучаюсь в попытках найти идеальный салат с кукурузойпод новый год. Или просто салат. Или просто блюдо. Однажды я зашел на сайт со всякими полурекламными статьями и выбрал статью про 10 лучших салатов с кукурузой. Я протестировал каждый из этих салатов и пришел к выводу, что те, кто публикуют в интернете на платной основе сами своих блюд никогда не едят. Бездушные копирайтеры. </p>
<p>https://lifehacker.ru/salaty-s-kukuruzoj-recepty/</p>
<p>и что же можно взять как альтернативу? есть авторские кулинарные блоги. Но хотелось чего-то необычного. Мой взгляд в эту зиму упал на легенду российского интернета Povarenok.ru. Место, где пользователи сами публикуют рецепты.</p>
<p>Описать этот культурный в российской истории феномен достаточно сложно. Лучшим сравнением будет очень непростой вид искусства как ЖКХ арт. https://yandex.ru/search/?clid=1882628&amp;text=ЖКХ%20арт&amp;l10n=ru&amp;lr=43 Хаотичные украшения дворов из старых покрышек (Легендарный русский лебедь из покрышек чего стоит) , старых игрушек, странные изородованные временем лица сказочных персонажей. Очень самобытный и противоречивый вид искусства.</p>
<p>Так вот поваренок - ЖКХ Арт мира кулинарии. У него слава ресурса, где неграмотные пользователи интернета выкладывают "хрючево" из несовместимых ингредиентов. Этому явлению даже посвящены отдельные группы в соц.сетях. Поищите по запросу "Карательная кулинария". Авторы регулярно ругаются, но тем не менее у сайта есть своё крепкое сообщество, постики публикуются, регулярно проходят конкурсы.</p>
<p>Несколько изображений скажут лучше, чем тысячи слов</p>
<h2>Что нам известно?</h2>
<p>Изначально хотел написать скрапер на requests, просто забирая значение странички и парся. Но рейтинг рецепта - целевое значение, на которое я буду опираться подгружается через некоторое время отдельным запросом и только если пользователь авторизован. В итоге решил не мучаться с получением сессии через запросы, а написал бота, который в реальном браузере заходит на странички и парсит нужные значения.</p>
<p>Его глаза увидели 136057 рецептов из заявленных на сайте bp 143444. Почему не все рецепты попали? Часть рецептов имеет странную верстку, которая осталась с какой-то рекламной компании и писать изменения в парсере на каждый такой рецепт очень затратно по времени. По части не вернулось отображение. К тому же на сайте очень странные id у рецептов. Например, последним на момент написания был 168564. Возможно, были какие-то чистки. Если верить сайту, то потеряно около 5% от общего количества, что можно считать допустимым. </p>
<p>Однако, мы обратим внимание на то, что среди потерянных были конкурсные работа, а там рейтинги зависят от активности пользователя по привлечению голосов.</p>
<p>Среди полезной информации, которая не была распарсена с сайта</p>
<ul>
<li>Сам процесс приготовления. Кто-то публиковал его голым текстом. Кто-то оформлял аккуратными блоками, где была картинка на каждом шаге. Это всё влияло на верстку страницы, и я не увидел смысла парсить эти описания. С одной стороны я не специалист по NLP, чтобы это всё приводить к адекватному для машинного обучения виду. Да и остальной информации в большинстве случаев более чем достаточно для понимания что перед нами. Способ приготовления или практически не имеет значения(Суп или салат почти всегода можно в каком-то виде воспроизвести по ингрединтам), либо так или иначе указан в тегах ("Жареное", "Вареное", "Духовка", "Крупным куском")</li>
<li>К тому же относятся комментарии</li>
<li>Имя автора. Немного жалею. Это ценная информация о которой я просто забыл. Если получится - доскребу. Интересно было бы посмотреть, какое на сайте количество "рок-звезд"</li>
<li>Изображение. Может быть для отдельного проекта тоже соскребу все, эти изображения. было бы интересно попробовать написать нейросеть, которая генерирует все эти салатики и тортики</li>
</ul>
<p>Всё остальное, насколько я увидел на странице было взято и изучено. Для модели обучения и формулировки задачи будет отдельный пост, а пока посмотрим чем жив наш поваренок</p>
<h2>Названия</h2>
<p>В основном названия достаточно понятны и логичны. Содержат в себе тип блюда, особенный ингредиент и какое-то возвышенное название.</p>
<ul>
<li>Салат " Импровизация с печенью"</li>
<li>Литературное название нам ни о чем не говорит. "Мышкина радость" это два рецепта торта, и салат</li>
<li>практически нет блюда без названия оригинальный</li>
<li>есть достаточно большое количество стандартных форм, которые используются для оформления еды. Например, по запросу "Цветок" можно найти цветок выложенный из огурцов, теста, сыра, лука, перца, моркови, редиса, ананаса, колбасы, риса, помидоров, свёклы, картофеля, дыни, мармелада, шоколада, острых перцев, квашеной капусты, мастики, мандаринов, рыбы, кабачков, ветчины, майонеза, кукурзы, рисовой бумаги, тыквы, ананасов и нескольких видов начинки. </li>
<li>Если в названии содержится зверь или персонаж, то высока вероятность, что это будет бомбически выглядеть. хотел разместить картинки прямо в блоге. но решил, что лучше просто дать ссылку. Играем по следующим правилам: читаете название. Представляете, что там может быть. открываете ссылку</li>
</ul>
<p>Торт черепаха в купальнике
https://www.povarenok.ru/recipes/show/1383/
Торт "Пчёлка"
https://www.povarenok.ru/recipes/show/35429/
Пчёлки из мастики
https://www.povarenok.ru/recipes/show/92977/
пирог "Улитка Гери" из спанчбоба
https://www.povarenok.ru/recipes/show/26504/
Слойки "Волк"
https://www.povarenok.ru/recipes/show/26095/
Робот
https://www.povarenok.ru/recipes/show/43375/
Крот
https://www.povarenok.ru/recipes/show/50556/</p>
<ul>
<li>
<p>Многие фантазии авторов, вообще, невозможно как-то интерпретировать, если не лезть в сам рецепт.
"Белеет парус одинокий",Курица «По-буржуйски» ,Пицца-глазунья, Чебуреки с повидлом, "Магдалена",Аджика из кабачка.</p>
</li>
<li>
<p>Есть много рецептов с интересными названиями и совершенно банальным рецептом внутри. Все эти рецепты не стоят вашего внимания</p>
<ul>
<li>Рис "Между нами девочками"</li>
<li>Салат придуманный 5-ти летним сыном</li>
<li>Двух слойный чай</li>
<li>Салат "Смертельный номер"</li>
<li>Грибы По-Венесуэльски</li>
</ul>
</li>
<li>Исследуя датасет, вы наверняка найдете давно забытое блюдо. Вот например очень простой торт, который готовила в детстве бабушка, когда было денег на сладости https://www.povarenok.ru/recipes/show/737/</li>
<li>Есть пользователи, которые реально вдохновляют своей работой, но имеют малое число баллов. Хороший рецепт или просто красивая работа - совсем не показатель успеха.
https://www.povarenok.ru/recipes/show/73164/ - Самые красивые пчелы на сайте
https://www.povarenok.ru/recipes/show/58515/ - охрененный медведь</li>
<li>Иногда выкладывают фото семьи, делают к рецепту сюжет. 
https://www.povarenok.ru/recipes/show/53146/
https://www.povarenok.ru/recipes/show/53133/</li>
</ul>
<p>Но это всё лирика
Посмотрим какие слова используются часто, а какие нет.
Возьмем не сами слова, а корни, чтобы не мучаться со всеми склонениями
Да, мы смешиваем печенье и печень, но это нас пока не интересует пока.</p>
<p>топ-10
салат 15409
курин 9352
пирог 8482
торт 6400
соус 5630
печен 5496
суп 4505
творожн 3411
кекс 3375
сыр 3186</p>
<p>Итак, нам, очень повезло. Самая крупная категория - 11% процентов рецетов - салаты.
Я в первый и последний раз привожу пример с таким количеством стоблбцов, чтобы показать, что все распределения в сете, где пользователям давали что-то выбирать. сначала 5-10 тегов самых топовых, потом резкое падение и почти бесконечный убывающий хвост распределения. На этом графике показаны 100 из ~ 17000 различных корней встречающихся в рецептах. там огромное количество мусора, недоработок библиотеки стемминга, которой я вынимаю корни и проч. В следующих графиках будет 10 основных характеристик, чтобы эти графики читались. </p>
<p>Отмечаем, что в целом Поваренок это форум для салатов и выпечки</p>
<h2>Даты</h2>
<p>Три основные тренды формирующие тренд поваренка</p>
<ul>
<li>
<p>Форум уже давно не так популярен, как в былые годы. Количество рецептов сначала взлетело, потом постепенно начало падать.</p>
</li>
<li>
<p>Ингредиенты имеют ярко выраженную сезонность. Вот график майонеза. Ярко выраженные пики публикаций под новый год.
    Важный вопрос - влияет ли сезонность на рейтинг? правда ли, что тыква вкуснее в октябре, когда публикуется много рецептов про тыкву, и много людей ищет эти рецепты? а а за майонез люди активнее голосуют зимой больше зимой?
    Я поигрался с разными ингредиентами, которые так или иначе я относил к сезонным. и не нашел прямых корреляций. Для примера вот, что происходит с тыквой: публикуют её рецепты в сезон, но голосуют в течение года совершенно непредсказуемо.</p>
<p>Приходим к закономерной дилеме глядя на годы. в одни периоды посещаемость высокая. в другие низкая. Количество лайков может быть положительно коррелировано с количеством постов. Ведь если много постов, значит много людей, и они чаще выставляют лайки. С другой стороны, если все постят, то ваше рецепт быстро затеряется во вкладках актуальной информации, и быстро пропадет с главной страницы.</p>
<p>Вообщем, вот еще одна диаграмма с кружочками для самостоятельного изучения. Самые крупные кружки - этомесяцы с самой высокой посещаемостью. Может показаться, что в пики посещаемости рейтинги действительно взлетали, но коэффициент коррелляции больше склоняет это к случайносму шуму
Коэфициенткорреляции Пирсона = -0.16056599205403113 (практически шум)
p-value = 0.04386767193395407 &lt; 5%</p>
<p>Со всем остальным тоже не так очевидно. При расчет среднего рейтинга по месяцам сам месяц не влияет настолько сильно, насколько влияет год голосования. Отметим, что в 2010-2011 люди были гораздо щедрее на лайки. Посещаемость сайта коррелирует с количеством лайков.
На этапе feature selection я всё равно оставлю месяц публикации, потому что всё-таки для зимы данные достаточно аномальны с этими новогодними праздниками.</p>
</li>
<li>
<p>Было ли влияние дней недели на популярность блюда? 
    Начнем с того, что пользователи людят понедельники. Больше всего публикуют по понедельникам, постепенно уменьшая активность вплоть до субботы, с вспышкой активности в воскресение. Разница в рейтинге не статистически значима. Но Волна убликаций от воскресения к понедельнику сохраняется всё время существования сайта. Вероятность того, что понедельник конкретной недели обгонит субботу этой же недели составляет примерно 2 к 1. Без графика посещаемости тех, кто не публикует, не понять, где тут причина, а где следствие.</p>
</li>
</ul>
<h2>Время</h2>
<p>не обнаружил связи между тем насколько востребован рецепт в какое-то время суток и рейтингом. примерно одинаковые позиции с совсем небольшой корреляцией - лучше публиковать после 12 ти ночи, но до 10 утра по Москве. Утренние просмотры свежих рецептов могут дать небольшой буст. </p>
<p>а вот большинство предпочитает публиковать свои рецептики после обеда и до вечера</p>
<h2>Просмотры</h2>
<p>Просмотры при создании рецепта мы никак не можем сделать признаком блюда. Однако мы можем оценить 2 параметра</p>
<ul>
<li>есть ли связь между количеством просмотров и итоговым рейтингом</li>
<li>Копится ли количество просмотров со временем у каждого рецепта. Возможно, у старых рецептов копится время</li>
</ul>
<p>Я убрал с графика выбросы - предельные значения по просмотрам и рейтингам. Основные зависимости
* Каждому уровню рейтинга - соответствует минимальное число просмотров. Хотя бы чтобы человек поставил лайк ему нужно зайти
* Высокое количество просмотров повышает шанс на высокий рейтинг, но не гарантирует его</p>
<h2>Наличие фото</h2>
<h2>Рейтинги</h2>
<p>В следующей части мы посмотрим еще несколько закономерностей, но уже больше связанных со словами, вкусами, ингредиентами, национальными кухнями, пользовательскими всем, что не число. А еще попробуем отследить связь между калорийностью, БЖУ и тем что пользователи любят</p>
                    </section>
                    <hr/>
                    <aside class="post-meta">
                        <p>Category: <a href="/category/dataanalitics.html">DataAnalitics</a></p>
                    </aside>
                    <hr/>
                </article>
    </div>
        </main>
        <footer id="colophon" class="site-footer inner">
          <div class="site-footer-inside">
            <span class="copyright">Опубликовано с удовольствием 2019-2020</span>
          </div>
          <a id="to-top" class="to-top" href="https://themes.stackbit.com/demos/fjord/#page">
            To top
            <span class="icon-arrow-up" aria-hidden="true"></span>
          </a>
        </footer>
      </div>

        </div>

        <script src="/theme/js/main.js" type="text/javascript"></script>
        <script src="/theme/js/plugins.js" type="text/javascript"></script>
    </body>



<!--               

 -->